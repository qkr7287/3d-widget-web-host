# 테스트 리스트 & 예상 결과 예시 (3d-widget / web-host / combined-app)

## 목적

- **분리 실행**(원격 모듈 임베드) 환경에서 3D 위젯이 정상 로드/렌더링되는지 확인
- **combined-app(로컬 결합)**과 비교하여 **로딩 타임**을 계측/비교
- **빌드 산출물(dist) 기반** 운영 형태에서도 동일하게 정상 동작하는지 검증

---

## 공통 전제/환경

### 장비/역할(요청 조건)

- **데스크탑 (IP: 47)**: `3d-widget`
- **노트북 (IP: 46)**: `web-host`

> IP는 “마지막 옥텟”만 적혀 있으니, 실제 문서 적용 시 `192.168.0.47`처럼 **전체 IP**로 치환하세요.

### 기본 포트(레포 기본값)

- **web-host**: `5173`
- **3d-widget**: `5174`
- **combined-app**: `6100`

### 원격 위젯 URL 규칙(web-host 기준)

- **DEV(개발 서버)**: `http://<WIDGET_HOST>:5174/src/embed.ts`
- **PROD(빌드/배포)**: `http://<WIDGET_HOST>:5174/embed.js`

추가로, web-host는 아래 우선순위로 위젯 URL을 결정합니다.

- **1순위**: 쿼리스트링 `?widget=<URL>` (임시 테스트 교체용)
- **2순위**: `config/dev-config.ts`의 override 값(설정되어 있을 때)
- **3순위**: 모드별 기본값(DEV/PROD 규칙)

### “로딩 타임” 측정 기준(프로젝트 기준과 동일)

본 레포에서는 호스트/결합 앱에서 아래 시점을 “로딩 완료(안정화)”로 보고 측정합니다.

- **웹 진입 순간 → GLB 로드 → scene ready → 몇 프레임 렌더 안정화 완료**

### 공통 체크 항목

- **기능**: 3D 모델 표시, 카메라/인터랙션(있다면) 정상
- **네트워크**: `.glb` 및 관련 리소스 요청 **200**, 404 없음
- **콘솔**: Error 없음(특히 CORS/MIME/네트워크/WebGL 관련)
- **보안/정책**: 브라우저의 `ERR_UNSAFE_PORT`, Mixed Content(http/https 혼용) 없음

---

## 테스트 리스트 (Test Cases)

### TC-01 분리 실행(DEV) — 원격 임베드로 3D 로딩/렌더링 검증

- **목적**: 노트북(web-host)에서 데스크탑(3d-widget)의 원격 모듈을 가져와 3D asset/소스를 정상 로드하는지 확인
- **환경**
  - 데스크탑(47): `apps/3d-widget` Dev 서버 실행
  - 노트북(46): `apps/web-host` Dev 서버 실행
- **절차**
  - 노트북에서 `web-host` 접속
  - 화면 상 “원격 3D 위젯 로딩/연결” 흐름이 완료될 때까지 대기
  - DevTools → **Console/Network** 확인
- **기대 결과**
  - 3D 모델이 정상 표시되고, 렌더링이 안정적으로 유지됨
  - `.../src/embed.ts` import 성공
  - `.glb` 요청이 200으로 내려오며, 404/CORS 에러가 없음
- **수집할 증거(권장)**
  - Network에서 `free_cyberpunk_hovercar.glb` 요청의 **Status/Size/Time**
  - Console 스크린샷(에러 없음)

---

### TC-02 combined-app(DEV) — 로딩 타임 측정(3회) 및 평균 산출

- **목적**: 원격 임베드 없이 로컬 import로 실행하는 결합 앱의 로딩 타임을 측정(비교 기준)
- **환경**
  - (권장) 한 장비에서 `apps/combined-app` 실행 후 측정
  - 브라우저: 동일 버전/동일 조건 유지
- **절차**
  - 시크릿 모드(또는 캐시 삭제 후) 접속
  - 하드 리로드(CTRL+F5) 3회 반복
  - 화면에 표시되는 “로딩 완료(안정화): XXX ms” 값을 기록
- **기대 결과**
  - 3회 모두 정상 로딩
  - 평균/최소/최대 값 산출 가능

---

### TC-03 분리 실행(DEV) — 로딩 타임 측정(3회) 및 combined-app 대비

- **목적**: 요청하신 조건(47=widget, 46=host)에서 로딩 타임을 측정하고 combined-app과 비교
- **환경**
  - 데스크탑(47): `apps/3d-widget` Dev
  - 노트북(46): `apps/web-host` Dev
- **절차**
  - TC-01 환경에서 하드 리로드 3회
  - “로딩 완료(안정화): XXX ms” 기록
  - combined-app 측정값과 비교(평균 기준)
- **기대 결과**
  - 3회 모두 정상 로딩
  - 원격 임베드 특성상 combined-app 대비 증가할 수 있으나, **일관된 범위**로 유지

---

### TC-04 분리 실행(PROD=빌드 산출물) — dist 기반 정상 동작 검증

- **목적**: Dev 서버가 아니라 **빌드 결과물(dist)** 정적 서빙 환경에서도 정상 작동하는지 검증
- **환경**
  - 데스크탑(47): `3d-widget` 빌드 산출물 서빙(기본 규칙상 `/embed.js`)
  - 노트북(46): `web-host` 빌드 산출물 서빙
- **절차**
  - 노트북에서 web-host 접속
  - DevTools → Network에서 `.../embed.js` 및 `.glb` 응답 확인
  - 콘솔 에러/404/MIME 문제 확인
- **기대 결과**
  - `embed.js` 로드 성공
  - `.glb` 포함 리소스 404 없이 로드
  - 콘솔 에러 없음(CORS/MIME/경로 문제 없음)

---

## 예상 결과 예시(샘플 리포트)

> 아래 숫자/시간은 **예시**입니다. 실제 결과로 교체해서 사용하세요.

### 1) 결과 요약(Summary)

- **테스트 일자**: 2026-01-26
- **환경**
  - Desktop(47): `3d-widget` (DEV/PROD)
  - Laptop(46): `web-host` (DEV/PROD)
  - Browser: Chrome 131
- **결론**
  - **TC-01**: PASS
  - **TC-02**: PASS
  - **TC-03**: PASS
  - **TC-04**: PASS

---

### 2) 케이스별 상세 결과(예시)

#### TC-01 결과(예시)

- **판정**: PASS
- **Network(핵심 리소스)**
  - `src/embed.ts`: 200
  - `free_cyberpunk_hovercar.glb`: **200**, 12.4MB, 1.8s
- **Console**
  - Error: 없음
  - Warning: `WebGL: INVALID_OPERATION` 1회(기능 영향 없음)
- **비고**
  - 동일 조건 3회 재현 시 Warning 재현율 1/3

---

#### TC-02 결과(예시) — combined-app 로딩 타임(3회)

| Run | 로딩 완료(안정화) ms | 비고 |
|---:|---:|---|
| 1 | 2350 | 시크릿 모드 |
| 2 | 2210 | 하드 리로드 |
| 3 | 2400 | 하드 리로드 |
| **Avg** | **2320** |  |

---

#### TC-03 결과(예시) — 분리 실행 로딩 타임(3회)

| Run | 로딩 완료(안정화) ms | 비고 |
|---:|---:|---|
| 1 | 3100 | 시크릿 모드 |
| 2 | 2950 | 하드 리로드 |
| 3 | 3240 | 하드 리로드 |
| **Avg** | **3100** |  |

**비교(예시)**: 분리 실행 Avg 3100ms - combined Avg 2320ms = **+780ms**

---

#### TC-04 결과(예시) — dist 기반(PROD)

- **판정**: PASS
- **Network**
  - `embed.js`: 200
  - `.glb`: 200
  - 404: 0건
- **Console**
  - Error: 없음
- **비고**
  - 정적 서빙 환경에서 경로(base) 문제 없음

---

## 이슈 기록(템플릿)

| ID | 케이스 | 증상 | 심각도 | 재현율 | 원인 추정 | 조치/결론 |
|---|---|---|---|---|---|---|
| ISSUE-01 | TC-01 | WebGL Warning 1회 | Low | 1/3 | 드라이버/초기화 타이밍 | 영향 없음, 추적 예정 |

